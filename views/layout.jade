doctype
html(lang='en')
  head
    meta(charset='utf-8')
    title ALIS Web Portal

    meta(name='viewport' content='width=device-width, initial-scale=1')

    link(rel='stylesheet' href='/components/bootstrap/dist/css/bootstrap.css')
    link(rel='stylesheet' href='/css/fontello.css')
    link(rel='stylesheet' href='/css/layout.css')

    block styles

    script(src='/components/jquery/dist/jquery.js')

    block scripts-head

  body

    //- TODO: find a method to ensure there aren't any redundant mixins defined.
    mixin createLargeLabellessField(name, type, placeholder)
      - var cls = 'form-group'
      - var value = ''
      if fields[name]
        if typeof fields[name].type == 'string'
          - cls += ' has-' + fields[name].type
        if typeof fields[name].value == 'string'
          - value = fields[name].value
      div(class=cls)
        input.form-control.input-lg(type=type name=name placeholder=placeholder value=value)
        if fields[name] && typeof fields[name].message == 'string'
          span.help-block #{fields[name].message}

    nav.navbar.navbar-default(role='navigation')
      .container-fluid
        .navbar-header
          if (user)
            button.navbar-toggle(type='button', data-toggle='collapse', data-target='#navbar')
              span.sr-only
              span.icon-bar
              span.icon-bar
              span.icon-bar
          a.navbar-brand(href='/') ALIS Web Portal

        if (user)
          #navbar.collapse.navbar-collapse
            include partials/loggedin-nav

    .container-fluid
      .alerts
        for errorMessage in messages.error || []
          .alert.alert-danger.alert-dismissable
            button.close(type='button' data-dismiss='alert' aria-hidden='true') &times;
            != mdoneline(errorMessage)

        for warningMessage in messages.warning || []
          .alert.alert-warning.alert-dismissable
            button.close(type='button' data-dismiss='alert' aria-hidden='true') &times;
            != mdoneline(warningMessage)

        for successMessage in messages.success || []
          .alert.alert-success.alert-dismissable
            button.close(type='button' data-dismiss='alert' aria-hidden='true') &times;
            != mdoneline(successMessage)

        for successMessage in messages.info || []
          .alert.alert-info.alert-dismissable
            button.close(type='button' data-dismiss='alert' aria-hidden='true') &times;
            != mdoneline(successMessage)

    //- TODO add padding at the bottom.

    block content

    
    script(src='/components/bootstrap/dist/js/bootstrap.js')

    if (user && user.isAdmin)
      script(src='/js/admin.js')

    block scripts
